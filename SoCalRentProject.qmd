---
title: "NatsPortfolio"
---

# Before Getting Started

Load in packages and data

```{r}
here::i_am("NatsPortfolio/SoCalRentProject.qmd")
```

```{r}
#| label: import data 
library(readr)
library(dplyr)
library(stringr)
library(tidyverse)
library(janitor)
SoCalRent <- read_csv(here::here("ProjectData/SoCalDataRaw_2025.csv"))
```

# Getting the Raw Data

Trying to get a clean version of public data was surprisingly difficult. I ended up using Redfin and Excel's web tools to auto-generate tables from URLs. I pulled data from three Southern California counties — Orange County, Riverside County, and Los Angeles County. For each county, I collected data on three types of listings: House, Condo, and Apartment. The raw data I gathered was fairly decent, but it needed some cleaning and clarification.

```{r}
head(SoCalRent)
```

# Data Wrangling

There were a few listings with missing data in certain columns, so for the sake of sanity, I just removed them.

**Price** came in various formats (e.g., `$3,185/mo`, `$1940+/mo`), so I removed dollar signs, commas, and plus signs, then converted the column to numeric.

**Beds** and **Baths** also had inconsistent formats like `1 bed`, `3 beds`, or even ranges like `2–4 beds`. I stripped out the words "bed(s)" and "bath(s)", and for ranges, I took the smallest number. Both columns were then converted to numeric.

**SqFt** was the messiest. It appeared as `1668.00`, `1,970`, or ranges like `410–480`. I removed commas and decimal points (since I didn’t need the `.00`), and again, for ranges, I used the lower bound. This column was also converted to numeric.

For the **address** column, I kept it in case I wanted to refer to the full address later. But I also extracted just the **city** name into a separate column to analyze trends across cities.

Lastly, I removed any listings where either **Beds** or **Baths** were equal to zero.

After cleaning, I was left with **278 observations** out of the original **333**.

```{r}
Rent_Clean <- SoCalRent |>
  #cleaning out any listings that have any empty data for the sake of my sanity
  filter(!is.na(Price), !is.na(Beds), !is.na(Baths), !is.na(SqFt), !is.na(Address)) |>
  # Remove rows where SqFt starts with an en dash (—)
  filter(!str_starts(SqFt, "—")) |>
  mutate(
    # Price column: remove any $, +, /mo and change it to a numeric variable
    Price = str_remove_all(Price, "\\$|,|/mo|\\+"),
    Price = as.numeric(Price),

    # Beds column: take the smallest number of beds and change it to a numeric variable
    Beds = str_extract(Beds, "^\\d+"),
    Beds = as.numeric(Beds),

    # Baths column: take the smallest number of baths and change it to a numeric variable
    Baths = str_extract(Baths, "^\\d+(\\.\\d+)?"),
    Baths = as.numeric(Baths),

    # SqFt column: takeing the first number from ranges, removes and commas or dashes and change it to a numeric variable
    SqFt = str_remove_all(SqFt, ","),  # Remove commas
    SqFt = case_when(
      str_detect(SqFt, "-") ~ as.numeric(str_extract(SqFt, "^[0-9]+")),
      TRUE ~ as.numeric(SqFt)
    ),
    # City Column: I decided to just make a new column "titled city" that was the address column is still there but I have just the city in a seperate column
    City = str_split_fixed(Address, ",", 3)[, 2]
  ) |>
  # If beds or baths is 0, remove the row
  filter(Beds != 0, Baths != 0)
head(Rent_Clean)

```

# Numerical & Categorical Summaries

I decided to look at the data by grouping by County and housing Type. As shown below, the number of observations are not equally proportioned to each other and must be taken into account later when creating models.

```{r}
Rent_Clean|>
  tabyl(County,Type)|>
    adorn_totals(c("row", "col"))
```

Showing the different between mean and median and i can clearly see that there is one or two outliers within LA and OC

```{r}
Rent_Clean |>
  group_by(County)|>
  summarize(mean_price = mean(Price, na.rm = TRUE), 
            median_price = median(Price, na.rm = TRUE))

```

```{r}
outliers <- Rent_Clean |>
  group_by(County) |>
  mutate(
    Q1 = quantile(Price, 0.25),
    Q3 = quantile(Price, 0.75),
    IQR = Q3 - Q1,
    lower_bound = Q1 - 2 * IQR,
    upper_bound = Q3 + 2 * IQR
  ) |>
  filter(Price < lower_bound | Price > upper_bound)
print(outliers)
```

```{r}
Summary_table <- Rent_Clean|>
  group_by(County, Type)|>
  mutate(price_per_sqft = Price / SqFt) |>
  summarize(
    mean.price= round(mean(Price)),
    mean.SqFt= round(mean(SqFt)),
    mean.beds= round(mean(Beds)),
    mean.baths=round(mean(Baths)),
    mean_price_per_sqft = mean(price_per_sqft),
    .groups = "drop"  )
print(Summary_table)
```

```{r}
#looking at a ggplot of numerical analysis
summary_table <- Rent_Clean |>
  group_by(County, Type) |>
  summarize(
    mean.price = round(mean(Price, na.rm = TRUE)),
    .groups = "drop"
  )

ggplot(summary_table, aes(x = interaction(County, Type), y = mean.price, fill = County)) +
  geom_col() +
  scale_fill_manual(values=c("RIV"="#084B83","OC"="#FF66B3","LA"="#42BFDD"))+
  labs(
    title = "Average Rent Price by County and Type",
    x = "County & Type",
    y = "Average Rent Price"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```

```{r}
# correlation analysis between price and beds
Rent_Clean|>
  group_by(County)|>
  summarise(
Bed_cor=cor(Price, Beds), 
Baths_cor=cor(Price, Baths), 
SqFt_cor=cor(Price, SqFt))

```

# Whats the question I'm trying to answer?

One day I or someone else is going to have to rent out a place. I am going to try to figure out what should i buy where to get the most out of the price. What type of housing should should I buy and where?

One of the main problems is being what do i value more: Space, baths, beds.

# Looking at Price/SqFt

```{r}

```

# Creating a Value Score

```{r}

```

# Comparing Numerical Summaries

```{r}

```
